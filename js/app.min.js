(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)})),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")?document.querySelector(".game")&&(document.querySelector(".check").textContent=sessionStorage.getItem("money")):(sessionStorage.setItem("money",0),document.querySelector(".check").textContent=0);const t=document.querySelector(".preloader"),s=document.querySelector(".wrapper"),o=document.querySelector(".icon-pause"),n=document.querySelector(".pause");let a,r=document.querySelector(".game__text_bet"),c=document.querySelector(".game__current-count");var l,i;function d(){let e;document.querySelectorAll(".game__level").forEach((t=>{t.classList.contains("_active")&&(e=t.dataset.level)})),sessionStorage.setItem("level",e)}document.addEventListener("click",(e=>{let a=e.target;a.closest(".acces-preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),s.classList.add("_visible")),a.closest(".game__button")&&(d(),function(){1==sessionStorage.getItem("level")?L=[new q(67,0,C(250,400))]:2==sessionStorage.getItem("level")?L=[new q(67,0,C(250,400)),new q(111,0,C(250,400))]:3==sessionStorage.getItem("level")?L=[new q(67,0,C(250,400)),new q(111,0,C(250,400)),new q(148,0,C(250,400))]:4==sessionStorage.getItem("level")?L=[new q(67,0,C(250,400)),new q(111,0,C(250,400)),new q(148,0,C(250,400)),new q(182,0,C(250,400))]:5==sessionStorage.getItem("level")?L=[new q(67,0,C(250,500)),new q(111,0,C(250,500)),new q(148,0,C(250,500)),new q(182,0,C(250,500)),new q(75,0,C(250,500))]:6==sessionStorage.getItem("level")?L=[new q(67,0,C(250,500)),new q(111,0,C(250,500)),new q(148,0,C(250,500)),new q(182,0,C(250,500)),new q(75,0,C(250,500)),new q(105,0,C(250,500))]:7==sessionStorage.getItem("level")&&(L=[new q(67,0,C(250,500)),new q(111,0,C(250,500)),new q(148,0,C(250,500)),new q(182,0,C(250,500)),new q(75,0,C(250,500)),new q(105,0,C(250,500)),new q(145,0,C(250,500))]);L.forEach((e=>{_[e.currentIndex].classList.add("stone")}))}(),x(100,500),function(){sessionStorage.getItem("floor");let e=E();f=setInterval((()=>{_[I].classList.contains("one-floor")?sessionStorage.setItem("floor",1):_[I].classList.contains("two-floor")?sessionStorage.setItem("floor",2):_[I].classList.contains("three-floor")?sessionStorage.setItem("floor",3):_[I].classList.contains("four-floor")?sessionStorage.setItem("floor",4):_[I].classList.contains("five-floor")&&sessionStorage.setItem("floor",5),sessionStorage.setItem("current-win",+sessionStorage.getItem("floor")*e),c.textContent=sessionStorage.getItem("current-win")}),500)}(),document.querySelector(".game__levels").classList.add("_hold"),document.querySelector(".game__buttons").classList.remove("_hold"),document.querySelector(".game__button").classList.add("_hold"),o.classList.remove("_hold")),a.closest(".icon-pause")&&(o.classList.contains("_active")?(o.classList.remove("_active"),n.classList.remove("_active"),x(10,50)):(o.classList.add("_active"),n.classList.add("_active"),L.forEach((e=>clearInterval(e.timerId))))),a.closest(".pause__item_continue")&&(o.classList.remove("_active"),n.classList.remove("_active"),x(10,50))})),document.addEventListener("touchstart",(e=>{let t=e.target;t.closest(".game__arrow_left")&&(clearInterval(a),S(),a=setInterval((()=>{S(),A()}),250)),t.closest(".game__arrow_top")&&(clearInterval(a),h(),24==I&&(sessionStorage.setItem("floor",5),document.querySelector(".game__buttons").classList.add("_hold"),document.querySelector(".play").classList.add("_active"),b(),k()),a=setInterval((()=>{h(),A()}),250)),t.closest(".game__arrow_right")&&(clearInterval(a),w(),a=setInterval((()=>{w(),A()}),250)),t.closest(".game__arrow_bottom")&&(clearInterval(a),y(),a=setInterval((()=>{y(),A()}),250))})),document.addEventListener("touchend",(e=>{let t=e.target;t.closest(".game__arrow_left")&&clearInterval(a),t.closest(".game__arrow_top")&&clearInterval(a),t.closest(".game__arrow_right")&&clearInterval(a),t.closest(".game__arrow_bottom")&&clearInterval(a)})),document.querySelector(".game")&&(l="_active",i=".game__level",document.querySelectorAll(i).forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(i).forEach((e=>{e.classList.contains(l)&&e.classList.remove(l)})),e.classList.add(l),d(),function(){let e=sessionStorage.getItem("level");1==e?r.textContent=50:2==e?r.textContent=100:3==e?r.textContent=150:4==e?r.textContent=200:5==e?r.textContent=250:6==e?r.textContent=300:7==e&&(r.textContent=350)}()}))})));const u=document.querySelector(".box-field__field"),m=20;let g;g=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,1,2,2,2,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,2,2,2,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,2,2,4,2,2,2,2,2,2,2,2,2,2,2,2,3,2,2,1,1,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,1,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,1,1,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1];const _=[];let L,f,I=190;function v(){_[I].classList.remove("hero")}function S(){v(),_[I-1].classList.contains("wall-trp")||_[I-1].classList.contains("wall")||_[I-1].classList.contains("stone")||(I-=1),_[I].classList.add("hero"),p()}function w(){v(),_[I+1].classList.contains("wall-trp")||_[I+1].classList.contains("wall")||_[I+1].classList.contains("stone")||(I+=1),_[I].classList.add("hero"),p()}function h(){v(),_[I-m].classList.contains("stairs")&&(I-=40),_[I].classList.add("hero")}function y(){v(),_[I+m].classList.contains("stairs")&&(I+=40),_[I].classList.add("hero")}function p(){_[I+m].classList.contains("empty")&&(v(),I+=40,_[I].classList.add("hero"))}document.querySelector(".game")&&(!function(){for(let e=0;e<g.length;e++){const t=document.createElement("div");u.appendChild(t),_.push(t),1==g[e]?_[e].classList.add("wall-trp"):2==g[e]?_[e].classList.add("wall"):3==g[e]?_[e].classList.add("empty"):4==g[e]?_[e].classList.add("stairs"):5==g[e]?_[e].classList.add("one-floor"):6==g[e]?_[e].classList.add("two-floor"):7==g[e]?_[e].classList.add("three-floor"):8==g[e]?_[e].classList.add("four-floor"):9==g[e]&&_[e].classList.add("five-floor")}}(),_[I].classList.add("hero"));class q{constructor(e,t,s){this.startIndex=e,this.speed=s,this.currentIndex=e,this.timerId=NaN,this.startRotate=0,this.currentRotate=t}}function x(e,t){setTimeout((()=>{L.forEach((e=>function(e){const t=[-1,1];let s=t[Math.floor(Math.random()*(t.length-0)+0)];e.timerId=setInterval((function(){if(document.querySelectorAll(".box-field__field div").forEach((e=>{e.style.transform="rotate(0deg)"})),-1==s?e.currentRotate-=20:e.currentRotate+=20,document.querySelectorAll(".stone").forEach((t=>{t.style.transform=`rotate(${e.currentRotate}deg)`})),_[e.currentIndex+s].classList.contains("wall")||_[e.currentIndex+s].classList.contains("wall-trp")||_[e.currentIndex+s].classList.contains("stone"))s=t[Math.floor(Math.random()*(t.length-0)+0)];else{_[e.currentIndex].classList.remove("stone");let t=s;e.currentIndex+=t,_[e.currentIndex].classList.add("stone")}_[e.currentIndex+m].classList.contains("empty")&&(_[e.currentIndex].classList.remove("stone"),e.currentIndex+=40,_[e.currentIndex].classList.add("stone")),A()}),e.speed)}(e)))}),C(e,t))}function A(){_[I].classList.contains("stone")&&(L.forEach((e=>clearInterval(e.timerId))),clearInterval(a),document.querySelector(".game__buttons").classList.add("_hold"),b(),document.querySelector(".play").classList.add("_active"))}function b(){let e=sessionStorage.getItem("floor"),t=+sessionStorage.getItem("money"),s=E();sessionStorage.setItem("money",t+e*s),sessionStorage.setItem("current-win",e*s),document.querySelector(".play__text").textContent=sessionStorage.getItem("current-win"),k()}function E(){let e=sessionStorage.getItem("level"),t=0;return 1==e?t=50:2==e?t=100:3==e?t=150:4==e?t=200:5==e?t=250:6==e?t=300:7==e&&(t=350),t}function C(e,t){return Math.floor(Math.random()*(t-e)+e)}function k(){setTimeout((()=>{document.querySelector(".check").textContent=sessionStorage.getItem("money"),document.querySelector(".check").classList.add("_anim"),setTimeout((()=>{document.querySelector(".check").classList.remove("_anim")}),1e3)}),500)}window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();