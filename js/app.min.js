(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)})),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",5e3),(document.querySelector(".game")||document.querySelector(".game-2"))&&(document.querySelector(".check").textContent=sessionStorage.getItem("money"));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),s=document.querySelector(".icon-pause"),n=document.querySelector(".pause");let r,c=document.querySelector(".game__text_bet"),a=document.querySelector(".game__current-count");function l(e){document.querySelector(".characters__current-hero img")&&document.querySelector(".characters__current-hero img").remove();let t=document.createElement("img");t.setAttribute("src",`img/icons/hero-${e}.png`),t.setAttribute("alt","Image"),document.querySelector(".characters__current-hero").append(t)}function i(e){e&&e.classList.contains("button_yellow")&&(e.classList.remove("button_yellow"),document.querySelectorAll(".characters__button").forEach((e=>{e.classList.contains("button_green")&&(e.classList.remove("button_green"),e.classList.add("button_yellow"))})),e.classList.add("button_green"))}function u(e){document.querySelector(`.characters__button_${e}`).classList.remove("button_gray"),+sessionStorage.getItem("current-hero")==e?document.querySelector(`.characters__button_${e}`).classList.add("button_green"):document.querySelector(`.characters__button_${e}`).classList.add("button_yellow"),document.querySelectorAll(`.characters__button_${e} span`).forEach(((e,t)=>{1==t&&(e.textContent="Choose")}))}document.querySelector(".main")&&(sessionStorage.getItem("current-hero")||sessionStorage.setItem("current-hero",1),u(+sessionStorage.getItem("current-hero")),l(+sessionStorage.getItem("current-hero"))),document.querySelector(".main")&&sessionStorage.getItem("hero-2")&&u(2),document.querySelector(".main")&&sessionStorage.getItem("hero-3")&&u(3);const d=document.documentElement.clientWidth,m=document.documentElement.clientHeight;let _=[300,5];document.querySelector(".game-2")&&(!function(){let e=+sessionStorage.getItem("current-hero"),t=document.createElement("img");t.setAttribute("src",`img/icons/hero-${e}.png`),t.setAttribute("alt","Image"),document.querySelector(".footer__hero").append(t)}(),sessionStorage.setItem("timer",1));const g={start_coord_x:0,start_coord_y:0};function h(){document.querySelector(".footer__hero").style.left=`${_[0]}px`}function S(){let e=document.querySelector(".time-header__minute"),t=document.querySelector(".time-header__sec");if(+t.innerHTML>59){let o=+t.innerHTML,s=+e.innerHTML+1,n=o-59;n<10&&(n=`0${n}`),e.textContent=s,t.textContent=n}let o=!1;o=setInterval((()=>{let s=0;s="00"==t.innerHTML?59:+t.innerHTML-1,s<10&&(s=`0${s}`),0==s&&(s="00"),s<0&&(s=59),t.textContent=s,59==s&&+e.innerHTML>0?e.textContent=+e.innerHTML-1:"00"==s&&0==+e.innerHTML&&(clearInterval(o),sessionStorage.setItem("timer",0),setTimeout((()=>{document.querySelector(".timer").classList.add("_active")}),500))}),1e3)}function f(){let e=!1;e=setInterval((()=>{!function(){let e=X(0,5),t=X(30,100);console.log(`bonus_speed - ${t}`);let o=X(5,+d-10),s=document.createElement("div");s.classList.add("field__bonus");let n=document.createElement("img");n.setAttribute("src",`img/icons/${["bomb","bottle","box","cent","lighting"][e]}.png`),n.setAttribute("alt","Image"),s.append(n),s.style.left=`${o}px`,document.querySelector(".field__body").append(s);let r=!1,c=-50;r=setInterval((()=>{c+=5,s.style.top=`${c}px`,console.log(c),c>m+40&&(clearInterval(r),s.remove())}),t)}(),0==+sessionStorage.getItem("timer")&&clearInterval(e)}),1e3)}var L,I;function y(){let e;document.querySelectorAll(".game__level").forEach((t=>{t.classList.contains("_active")&&(e=t.dataset.level)})),sessionStorage.setItem("level",e)}document.querySelector(".game")&&(L="_active",I=".game__level",document.querySelectorAll(I).forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(I).forEach((e=>{e.classList.contains(L)&&e.classList.remove(L)})),e.classList.add(L),y(),function(){let e=sessionStorage.getItem("level");1==e?c.textContent=50:2==e?c.textContent=100:3==e?c.textContent=150:4==e?c.textContent=200:5==e?c.textContent=250:6==e?c.textContent=300:7==e&&(c.textContent=350)}()}))})));const v=document.querySelector(".box-field__field"),w=20;let q;q=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,1,2,2,2,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,2,2,2,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,2,2,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,1,1,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1];const b=[];let p,x,A=190;function E(){b[A].classList.remove("hero")}function C(){E(),b[A-1].classList.contains("wall-trp")||b[A-1].classList.contains("wall")||b[A-1].classList.contains("stone")||(A-=1),b[A].classList.add("hero"),k()}function $(){E(),b[A+1].classList.contains("wall-trp")||b[A+1].classList.contains("wall")||b[A+1].classList.contains("stone")||(A+=1),b[A].classList.add("hero"),k()}function M(){E(),b[A-w].classList.contains("stairs")&&(A-=40),b[A].classList.add("hero")}function T(){E(),b[A+w].classList.contains("stairs")&&(A+=40),b[A].classList.add("hero")}function k(){b[A+w].classList.contains("empty")&&(E(),A+=40,b[A].classList.add("hero"))}function H(){M(),24==A&&(sessionStorage.setItem("floor",5),document.querySelector(".game__buttons").classList.add("_hold"),document.querySelector(".play").classList.add("_active"),P(),N()),r=setInterval((()=>{M(),B()}),250)}document.querySelector(".game")&&(!function(){for(let e=0;e<q.length;e++){const t=document.createElement("div");v.appendChild(t),b.push(t),1==q[e]?b[e].classList.add("wall-trp"):2==q[e]?b[e].classList.add("wall"):3==q[e]?b[e].classList.add("empty"):4==q[e]?b[e].classList.add("stairs"):5==q[e]?b[e].classList.add("one-floor"):6==q[e]?b[e].classList.add("two-floor"):7==q[e]?b[e].classList.add("three-floor"):8==q[e]?b[e].classList.add("four-floor"):9==q[e]&&b[e].classList.add("five-floor")}}(),b[A].classList.add("hero"));class R{constructor(e,t,o){this.startIndex=e,this.speed=o,this.currentIndex=e,this.timerId=NaN,this.startRotate=0,this.currentRotate=t}}function Y(e,t){setTimeout((()=>{p.forEach((e=>function(e){const t=[-1,1];let o=t[Math.floor(Math.random()*(t.length-0)+0)];e.timerId=setInterval((function(){if(document.querySelectorAll(".box-field__field div").forEach((e=>{e.style.transform="rotate(0deg)"})),-1==o?e.currentRotate-=20:e.currentRotate+=20,document.querySelectorAll(".stone").forEach((t=>{t.style.transform=`rotate(${e.currentRotate}deg)`})),b[e.currentIndex+o].classList.contains("wall")||b[e.currentIndex+o].classList.contains("wall-trp")||b[e.currentIndex+o].classList.contains("stone"))o=t[Math.floor(Math.random()*(t.length-0)+0)];else{b[e.currentIndex].classList.remove("stone");let t=o;e.currentIndex+=t,b[e.currentIndex].classList.add("stone")}b[e.currentIndex+w].classList.contains("empty")&&(b[e.currentIndex].classList.remove("stone"),e.currentIndex+=40,b[e.currentIndex].classList.add("stone")),B()}),e.speed)}(e)))}),X(e,t))}function B(){b[A].classList.contains("stone")&&(p.forEach((e=>clearInterval(e.timerId))),clearInterval(r),document.querySelector(".game__buttons").classList.add("_hold"),P(),document.querySelector(".play").classList.add("_active"))}function P(){let e=sessionStorage.getItem("floor"),t=+sessionStorage.getItem("money"),o=W();sessionStorage.setItem("money",t+e*o),sessionStorage.setItem("current-win",e*o),document.querySelector(".play__text").textContent=sessionStorage.getItem("current-win"),N()}function W(){let e=sessionStorage.getItem("level"),t=0;return 1==e?t=50:2==e?t=100:3==e?t=150:4==e?t=200:5==e?t=250:6==e?t=300:7==e&&(t=350),t}function X(e,t){return Math.floor(Math.random()*(t-e)+e)}function N(){setTimeout((()=>{document.querySelector(".check").textContent=sessionStorage.getItem("money"),document.querySelector(".check").classList.add("_anim"),setTimeout((()=>{document.querySelector(".check").classList.remove("_anim")}),1e3)}),500)}document.addEventListener("click",(e=>{let r=e.target;r.closest(".acces-preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible")),r.closest(".game__button")&&(y(),1==sessionStorage.getItem("level")?p=[new R(67,0,X(250,400))]:2==sessionStorage.getItem("level")?p=[new R(67,0,X(250,400)),new R(111,0,X(250,400))]:3==sessionStorage.getItem("level")?p=[new R(67,0,X(250,400)),new R(111,0,X(250,400)),new R(148,0,X(250,400))]:4==sessionStorage.getItem("level")?p=[new R(67,0,X(250,400)),new R(111,0,X(250,400)),new R(148,0,X(250,400)),new R(182,0,X(250,400))]:5==sessionStorage.getItem("level")?p=[new R(67,0,X(250,500)),new R(111,0,X(250,500)),new R(148,0,X(250,500)),new R(182,0,X(250,500)),new R(75,0,X(250,500))]:6==sessionStorage.getItem("level")?p=[new R(67,0,X(250,500)),new R(111,0,X(250,500)),new R(148,0,X(250,500)),new R(182,0,X(250,500)),new R(75,0,X(250,500)),new R(105,0,X(250,500))]:7==sessionStorage.getItem("level")&&(p=[new R(67,0,X(250,500)),new R(111,0,X(250,500)),new R(148,0,X(250,500)),new R(182,0,X(250,500)),new R(75,0,X(250,500)),new R(105,0,X(250,500)),new R(145,0,X(250,500))]),p.forEach((e=>{b[e.currentIndex].classList.add("stone")})),Y(100,500),function(){sessionStorage.getItem("floor");let e=W();x=setInterval((()=>{b[A].classList.contains("one-floor")?sessionStorage.setItem("floor",1):b[A].classList.contains("two-floor")?sessionStorage.setItem("floor",2):b[A].classList.contains("three-floor")?sessionStorage.setItem("floor",3):b[A].classList.contains("four-floor")?sessionStorage.setItem("floor",4):b[A].classList.contains("five-floor")&&sessionStorage.setItem("floor",5),sessionStorage.setItem("current-win",+sessionStorage.getItem("floor")*e),a.textContent=sessionStorage.getItem("current-win")}),500)}(),document.querySelector(".game__levels").classList.add("_hold"),document.querySelector(".game__buttons").classList.remove("_hold"),document.querySelector(".game__button").classList.add("_hold"),s.classList.remove("_hold")),r.closest(".icon-pause")&&(s.classList.contains("_active")?(s.classList.remove("_active"),n.classList.remove("_active"),Y(10,50)):(s.classList.add("_active"),n.classList.add("_active"),p.forEach((e=>clearInterval(e.timerId))))),r.closest(".pause__item_continue")&&(s.classList.remove("_active"),n.classList.remove("_active"),Y(10,50)),r.closest(".characters__button_1")&&(sessionStorage.setItem("current-hero",1),l(1),i(r.closest(".characters__button_1"))),r.closest(".characters__button_2")&&sessionStorage.getItem("hero-2")&&(sessionStorage.setItem("current-hero",2),l(2),i(r.closest(".characters__button_2"))),r.closest(".characters__button_3")&&sessionStorage.getItem("hero-3")&&(sessionStorage.setItem("current-hero",3),l(3),i(r.closest(".characters__button_3"))),r.closest(".timer__button_play")&&(document.querySelector(".timer").classList.remove("_active"),document.querySelector(".time-header__minute").textContent=1,document.querySelector(".time-header__sec").textContent=30,sessionStorage.setItem("timer",1),S()),r.closest(".game-2__button-start")&&(document.querySelector(".game-2__box-button-start").classList.add("_active"),S(),f())})),document.addEventListener("touchstart",(e=>{let t=e.target;t.closest(".game__arrow_left")&&(clearInterval(r),C(),r=setInterval((()=>{C(),B()}),250)),t.closest(".game__arrow_top")&&(clearInterval(r),H()),t.closest(".game__arrow_right")&&(clearInterval(r),$(),r=setInterval((()=>{$(),B()}),250)),t.closest(".game__arrow_bottom")&&(clearInterval(r),T(),r=setInterval((()=>{T(),B()}),250)),t.closest(".footer__hero")&&(g.hero_coord_x=e.touches[0].clientX,g.hero_coord_y=e.touches[0].clientY)})),document.addEventListener("touchend",(e=>{let t=e.target;t.closest(".game__arrow_left")&&clearInterval(r),t.closest(".game__arrow_top")&&clearInterval(r),t.closest(".game__arrow_right")&&clearInterval(r),t.closest(".game__arrow_bottom")&&clearInterval(r),t.closest(".footer__hero")&&(document.querySelector(".footer__hero").style.transform="rotateY(0deg)")})),document.addEventListener("touchmove",(e=>{if(e.target.closest(".footer__hero")){let t=e.touches[0].clientX-g.hero_coord_x;console.log(`window_width - ${d}`),console.log("hero_width - 100 "),console.log(`currentPosition[0] - ${_[0]}`),t>0?_[0]<d-100&&(_[0]+=5,h(),document.querySelector(".footer__hero").style.transform="rotateY(30deg)"):_[0]>5&&(_[0]-=5,h(),document.querySelector(".footer__hero").style.transform="rotateY(-30deg)")}})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();